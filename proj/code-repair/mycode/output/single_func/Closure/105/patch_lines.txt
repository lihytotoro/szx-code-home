 StringBuffer sb = new StringBuffer();  int foldedSize = 0;  Node elem = arrayNode.getFirstChild();  while (elem != null) {    if (NodeUtil.isImmutableValue(elem)) {      if (sb.length() > 0) {        sb.append(joinString);      }      sb.append(NodeUtil.getStringValue(elem));    } else {      if (sb.length() > 0) {        foldedSize += sb.length() + 2;        arrayFoldedChildren.add(Node.newString(sb.toString()));        sb = new StringBuffer();      }      foldedSize += InlineCostEstimator.getCost(elem);      arrayFoldedChildren.add(elem);    }    elem = elem.getNext();  }  if (sb.length() > 0) {