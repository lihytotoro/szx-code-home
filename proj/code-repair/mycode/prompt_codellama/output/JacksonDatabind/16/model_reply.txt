 The correct line at the INFILL location should be:

return (previous != null) && previous.equals(ann);