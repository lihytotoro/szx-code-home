           Class<?> currRaw = type.getRawClass();            try {                if (serClass.isAssignableFrom(currRaw)) { // common case                    type = tf.constructGeneralizedType(type, serClass);                } else if (currRaw.isAssignableFrom(serClass)) { // specialization, ok as well                    type = tf.constructSpecializedType(type, serClass);                } else {                    throw new JsonMappingException(null,                            String.format("Can not refine type %s into %s; types not related",                                    type, serClass.getName()));                }