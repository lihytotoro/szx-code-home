if (endIndex < 0) {
    endIndex = -(endIndex + 1) - 1;
}
